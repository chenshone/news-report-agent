# çƒ­ç‚¹èµ„è®¯èšåˆ Agentic AI - å·¥ç¨‹å®ç°è®¡åˆ’

## æ€»ä½“åŸåˆ™

1. **åŸºäº DeepAgents**ï¼šå¤ç”¨æ¡†æ¶å†…ç½®èƒ½åŠ›ï¼ˆTodoã€æ–‡ä»¶ç³»ç»Ÿã€å­Agentï¼‰ï¼Œèšç„¦ä¸šåŠ¡é€»è¾‘
2. **å››å¤§èŒƒå¼é©±åŠ¨**ï¼šè§„åˆ’ï¼ˆPlanningï¼‰ã€åæ€ï¼ˆReflectionï¼‰ã€å·¥å…·ä½¿ç”¨ï¼ˆTool Useï¼‰ã€å¤šæ™ºèƒ½ä½“åä½œï¼ˆMACï¼‰
3. **æ¨¡å—ç‹¬ç«‹å¯æµ‹**ï¼šæ¯ä¸ªå·¥å…·/é…ç½®æœ‰æ¸…æ™°è¾¹ç•Œå’Œå•å…ƒæµ‹è¯•
4. **æ¸è¿›å¼é›†æˆ**ï¼šä»å·¥å…·åˆ°Agentï¼Œé€å±‚æ„å»º

---

## ğŸ“‹ å®ç°é˜¶æ®µæ€»è§ˆ

| é˜¶æ®µ | åç§° | æ ¸å¿ƒäº§å‡º | é¢„ä¼°å·¥æ—¶ |
|------|------|---------|---------|
| Phase 1 | é¡¹ç›®åŸºç¡€ | é…ç½®ã€æ•°æ®æ¨¡å‹ã€ä¾èµ– | 2h |
| Phase 2 | è‡ªå®šä¹‰å·¥å…· | æœç´¢ã€æŠ“å–ã€è¯„ä¼°å·¥å…· | 4h |
| Phase 3 | MasterAgent | Agent é…ç½®ã€ç³»ç»Ÿæç¤ºè¯ | 3h |
| Phase 4 | ä¸“å®¶å­Agent | 5ä¸ªä¸“å®¶é…ç½® | 3h |
| Phase 5 | ç«¯åˆ°ç«¯é›†æˆ | CLIã€æµ‹è¯•ã€æ–‡æ¡£ | 3h |

**æ€»è®¡**ï¼šçº¦ 15h

---

## DeepAgents å†…ç½®èƒ½åŠ›ï¼ˆæ— éœ€å®ç°ï¼‰

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ˜ç¡® DeepAgents å·²æä¾›çš„èƒ½åŠ›ï¼š

| èƒ½åŠ› | å·¥å…·/ä¸­é—´ä»¶ | ç”¨é€” |
|------|------------|------|
| **è§„åˆ’** | `write_todos` / `read_todos` | ä»»åŠ¡æ¸…å•ç®¡ç† |
| **æ–‡ä»¶ç³»ç»Ÿ** | `ls` / `read_file` / `write_file` / `edit_file` / `glob` / `grep` | ä¸Šä¸‹æ–‡å­˜å‚¨ |
| **å­Agent** | `task()` | æ´¾ç”Ÿä¸“å®¶è¿›è¡Œéš”ç¦»åˆ†æ |
| **æ‘˜è¦** | SummarizationMiddleware | ä¸Šä¸‹æ–‡è¶…é•¿æ—¶è‡ªåŠ¨å‹ç¼© |

**æˆ‘ä»¬åªéœ€å®ç°**ï¼šè‡ªå®šä¹‰å·¥å…· + Agent é…ç½® + ç³»ç»Ÿæç¤ºè¯

---

## Phase 1: é¡¹ç›®åŸºç¡€ï¼ˆ2hï¼‰

### ç›®æ ‡
æ­å»ºé¡¹ç›®åŸºç¡€è®¾æ–½ï¼Œç¡®ä¿ DeepAgents å¯æ­£å¸¸è¿è¡Œã€‚

### ä»»åŠ¡æ¸…å•

- [ ] **1.1 æ›´æ–°ä¾èµ–é…ç½®**
  - æ–‡ä»¶ï¼š`pyproject.toml`
  - æ·»åŠ ï¼š`deepagents>=0.2.8`ã€`tavily-python`ã€`httpx`ã€`beautifulsoup4`
  - éªŒè¯ï¼š`uv sync` æˆåŠŸ

- [ ] **1.2 é…ç½®ç®¡ç†**
  - æ–‡ä»¶ï¼š`src/config.py`
  - å†…å®¹ï¼š
    - API Keys åŠ è½½ï¼ˆOPENAI_API_KEY, TAVILY_API_KEYï¼‰
    - æ¨¡å‹é…ç½®ï¼ˆæŒ‰è§’è‰²ï¼‰
    - æ–‡ä»¶ç³»ç»Ÿåç«¯é…ç½®
  - æµ‹è¯•ï¼š`tests/test_config.py`

- [ ] **1.3 æ•°æ®æ¨¡å‹**
  - æ–‡ä»¶ï¼š`src/models.py`
  - å†…å®¹ï¼š
    - `NewsItem` - èµ„è®¯å®ä½“
    - `AnalysisResult` - åˆ†æç»“æœ
    - `IntegratedSummary` - æ•´åˆæ‘˜è¦
  - æµ‹è¯•ï¼š`tests/test_models.py`

- [ ] **1.4 éªŒè¯ DeepAgents åŸºç¡€åŠŸèƒ½**
  - æ–‡ä»¶ï¼š`tests/test_deepagents_basic.py`
  - éªŒè¯ï¼š
    - `create_deep_agent` å¯æ­£å¸¸åˆ›å»º
    - å†…ç½®å·¥å…·ï¼ˆwrite_todos, read_fileï¼‰å¯è°ƒç”¨
    - å­Agentï¼ˆtaskï¼‰å¯æ´¾ç”Ÿ

### éªŒæ”¶æ ‡å‡†
```python
from deepagents import create_deep_agent

agent = create_deep_agent(model="openai:gpt-4o-mini")
result = agent.invoke({"messages": [{"role": "user", "content": "å†™ä¸€ä¸ªç®€å•çš„todoåˆ—è¡¨"}]})
assert "write_todos" in str(result)  # Agent ä½¿ç”¨äº†å†…ç½®å·¥å…·
```

### ç›®å½•ç»“æ„
```
src/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â””â”€â”€ models.py          # æ•°æ®æ¨¡å‹
```

---

## Phase 2: è‡ªå®šä¹‰å·¥å…·ï¼ˆ4hï¼‰

### ç›®æ ‡
å®ç°é¢†åŸŸç‰¹å®šçš„å·¥å…·ï¼Œä¾› MasterAgent è°ƒç”¨ã€‚

### ä»»åŠ¡æ¸…å•

- [ ] **2.1 æœç´¢å·¥å…·**
  - æ–‡ä»¶ï¼š`src/tools/search.py`
  - åŠŸèƒ½ï¼š`internet_search(query, max_results, topic)`
  - å®ç°ï¼š
    - å°è£… Tavily API
    - è¿”å›æ ‡å‡†åŒ–ç»“æœï¼ˆtitle, url, source, contentï¼‰
    - é”™è¯¯å¤„ç†ä¸é‡è¯•
  - æµ‹è¯•ï¼š`tests/tools/test_search.py`

- [ ] **2.2 ç½‘é¡µæŠ“å–å·¥å…·**
  - æ–‡ä»¶ï¼š`src/tools/scraper.py`
  - åŠŸèƒ½ï¼š`fetch_page(url, max_length)`
  - å®ç°ï¼š
    - httpx å¼‚æ­¥è¯·æ±‚
    - BeautifulSoup æ­£æ–‡æå–
    - é•¿åº¦é™åˆ¶ï¼ˆé»˜è®¤ 5000 å­—ç¬¦ï¼‰
  - æµ‹è¯•ï¼š`tests/tools/test_scraper.py`

- [ ] **2.3 å¯ä¿¡åº¦è¯„ä¼°å·¥å…·**
  - æ–‡ä»¶ï¼š`src/tools/evaluator.py`
  - åŠŸèƒ½ï¼š`evaluate_credibility(url, title)`
  - å®ç°ï¼š
    - æ¥æºåŸŸåæ£€æŸ¥ï¼ˆç™½åå•/é»‘åå•ï¼‰
    - æ ‡é¢˜å…šå…³é”®è¯æ£€æµ‹
    - è¿”å›åˆ†æ•° + åŸå› 
  - æµ‹è¯•ï¼š`tests/tools/test_evaluator.py`

- [ ] **2.4 å·¥å…·æ³¨å†Œæ¨¡å—**
  - æ–‡ä»¶ï¼š`src/tools/__init__.py`
  - åŠŸèƒ½ï¼š
    - ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰å·¥å…·
    - å·¥å…·åˆ—è¡¨ä¾› Agent ä½¿ç”¨

### éªŒæ”¶æ ‡å‡†
```python
from src.tools import internet_search, fetch_page, evaluate_credibility

# æœç´¢æµ‹è¯•
results = await internet_search("AI Agent æœ€æ–°è¿›å±•", max_results=3)
assert len(results) <= 3
assert all("url" in r and "title" in r for r in results)

# æŠ“å–æµ‹è¯•
content = await fetch_page("https://example.com")
assert len(content) <= 5000

# è¯„ä¼°æµ‹è¯•
score, reasons = evaluate_credibility("https://reuters.com/...", "æ­£å¸¸æ ‡é¢˜")
assert score > 0.5
```

### ç›®å½•ç»“æ„
```
src/tools/
â”œâ”€â”€ __init__.py        # å·¥å…·å¯¼å‡º
â”œâ”€â”€ search.py          # internet_search
â”œâ”€â”€ scraper.py         # fetch_page
â””â”€â”€ evaluator.py       # evaluate_credibility
```

---

## Phase 3: MasterAgent é…ç½®ï¼ˆ3hï¼‰

### ç›®æ ‡
é…ç½® MasterAgentï¼Œé€šè¿‡ç³»ç»Ÿæç¤ºè¯å®ç°å››å¤§èŒƒå¼ã€‚

### ä»»åŠ¡æ¸…å•

- [ ] **3.1 ç³»ç»Ÿæç¤ºè¯è®¾è®¡**
  - æ–‡ä»¶ï¼š`src/agent/prompts.py`
  - å†…å®¹ï¼š
    - è§’è‰²å®šä¹‰ï¼ˆçƒ­ç‚¹èµ„è®¯åˆ†ææ™ºèƒ½ä½“ï¼‰
    - å·¥ä½œæµç¨‹è¯´æ˜ï¼ˆè§„åˆ’â†’æ£€ç´¢â†’ç­›é€‰â†’åˆ†æâ†’æ•´åˆâ†’æŠ¥å‘Šï¼‰
    - åæ€æ£€æŸ¥ç‚¹æŒ‡å¼•
    - æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨è§„èŒƒ
    - å­Agent ä½¿ç”¨æŒ‡å¼•
  - é‡ç‚¹ï¼šä½“ç°å››å¤§èŒƒå¼

- [ ] **3.2 MasterAgent åˆ›å»ºå‡½æ•°**
  - æ–‡ä»¶ï¼š`src/agent/master.py`
  - åŠŸèƒ½ï¼š`create_news_agent()`
  - å®ç°ï¼š
    - è°ƒç”¨ `create_deep_agent`
    - æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
    - é…ç½® subagentsï¼ˆä¸‹ä¸€é˜¶æ®µï¼‰
    - è®¾ç½®ç³»ç»Ÿæç¤ºè¯
  - æµ‹è¯•ï¼š`tests/agent/test_master.py`

- [ ] **3.3 æ¨¡å‹é…ç½®**
  - æ–‡ä»¶ï¼š`src/agent/model_config.py`
  - å†…å®¹ï¼š
    - æŒ‰è§’è‰²é…ç½®æ¨¡å‹ï¼ˆMasterAgent ç”¨ gpt-4oï¼Œç®€å•ä»»åŠ¡ç”¨ miniï¼‰
    - Temperature é…ç½®
    - è¶…æ—¶å’Œé‡è¯•è®¾ç½®

### ç³»ç»Ÿæç¤ºè¯æ ¸å¿ƒç»“æ„

```markdown
# è§’è‰²
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„çƒ­ç‚¹èµ„è®¯åˆ†ææ™ºèƒ½ä½“...

# å››å¤§èŒƒå¼

## 1. è§„åˆ’ (Planning)
- æ”¶åˆ°ä»»åŠ¡åï¼Œé¦–å…ˆä½¿ç”¨ write_todos åˆ›å»ºä»»åŠ¡æ¸…å•
- ä»»åŠ¡ç±»å‹ï¼šsearch, filter, analyze, integrate, report
- å¯æ ¹æ®æ‰§è¡Œæƒ…å†µåŠ¨æ€è°ƒæ•´è®¡åˆ’

## 2. åæ€ (Reflection)
- æ£€ç´¢åï¼šè¯„ä¼°ç»“æœæ•°é‡å’Œè´¨é‡ï¼Œä¸è¶³åˆ™è°ƒæ•´ç­–ç•¥
- ç­›é€‰åï¼šæ£€æŸ¥é€šè¿‡ç‡ï¼Œå¿…è¦æ—¶æ”¾å®½æ ‡å‡†æˆ–è¡¥å……æ£€ç´¢
- åˆ†æåï¼šæ£€æŸ¥å„ä¸“å®¶ç»“è®ºä¸€è‡´æ€§

## 3. å·¥å…·ä½¿ç”¨ (Tool Use)
- internet_search: æœç´¢èµ„è®¯
- fetch_page: æŠ“å–å…¨æ–‡
- evaluate_credibility: è¯„ä¼°å¯ä¿¡åº¦
- æ–‡ä»¶ç³»ç»Ÿ: å­˜å‚¨ä¸­é—´ç»“æœ

## 4. å¤šæ™ºèƒ½ä½“åä½œ (MAC)
- ä½¿ç”¨ task() æ´¾ç”Ÿä¸“å®¶å­Agent
- å¯ç”¨ä¸“å®¶ï¼šsummarizer, fact_checker, researcher, impact_assessor
- å„ä¸“å®¶ç‹¬ç«‹åˆ†æï¼Œç»“æœå†™å…¥æ–‡ä»¶ç³»ç»Ÿ

# æ–‡ä»¶ç³»ç»Ÿè§„èŒƒ
- /raw/: åŸå§‹æ£€ç´¢ç»“æœ
- /filtered/: ç­›é€‰åå†…å®¹
- /analysis/: ä¸“å®¶åˆ†æç»“æœ
- /reports/: æœ€ç»ˆæŠ¥å‘Š
```

### éªŒæ”¶æ ‡å‡†
```python
from src.agent import create_news_agent

agent = create_news_agent()

# éªŒè¯å·¥å…·å·²æ³¨å†Œ
assert "internet_search" in [t.name for t in agent.tools]

# éªŒè¯å¯æ‰§è¡Œ
result = agent.invoke({
    "messages": [{"role": "user", "content": "åˆ—å‡ºåˆ†æç§‘æŠ€çƒ­ç‚¹éœ€è¦çš„æ­¥éª¤"}]
})
# Agent åº”è¯¥è°ƒç”¨ write_todos
```

### ç›®å½•ç»“æ„
```
src/agent/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ master.py          # create_news_agent
â”œâ”€â”€ prompts.py         # ç³»ç»Ÿæç¤ºè¯
â””â”€â”€ model_config.py    # æ¨¡å‹é…ç½®
```

---

## Phase 4: ä¸“å®¶å­Agentï¼ˆ5hï¼‰

### ç›®æ ‡
é…ç½®ä¸“å®¶å­Agentï¼Œå®ç°å¤šæ™ºèƒ½ä½“åä½œï¼ŒåŒ…æ‹¬æŸ¥è¯¢è§„åˆ’ã€å†…å®¹åˆ†æå’Œä¸“å®¶åè°ƒã€‚

### ä»»åŠ¡æ¸…å•

- [x] **4.1 æŸ¥è¯¢è§„åˆ’ä¸“å®¶**
  - è§’è‰²ï¼š`query_planner`
  - èŒè´£ï¼šåˆ†æç”¨æˆ·æ„å›¾ï¼Œç”Ÿæˆå¤šç»´åº¦æœç´¢æŸ¥è¯¢ï¼Œåæ€è´¨é‡
  - å·¥å…·ï¼šæ— ï¼ˆçº¯ LLM æ¨ç†ï¼‰
  - æ¨¡å‹ï¼š`gpt-4o`

- [x] **4.2 å†…å®¹åˆ†æä¸“å®¶é…ç½®**
  - æ–‡ä»¶ï¼š`src/agent/subagents.py`
  - å®šä¹‰ 4 ä¸ªåˆ†æä¸“å®¶ï¼š
    - `summarizer` - æ‘˜è¦ä¸“å®¶
    - `fact_checker` - äº‹å®æ ¸æŸ¥
    - `researcher` - èƒŒæ™¯ç ”ç©¶
    - `impact_assessor` - å½±å“è¯„ä¼°

- [ ] **4.3 ä¸“å®¶ä¸»ç®¡ï¼ˆæ–°å¢ - å…³é”®ï¼ï¼‰**
  - è§’è‰²ï¼š`expert_supervisor`
  - èŒè´£ï¼š
    - å®¡æ ¸å„ä¸“å®¶çš„åˆ†æç»“æœ
    - å‘ç°çŸ›ç›¾ã€é”™è¯¯æˆ–é—æ¼
    - åè°ƒä¸“å®¶ä¹‹é—´çš„è®¨è®º
    - è¦æ±‚ä¸“å®¶ä¿®æ­£é—®é¢˜
    - æœ€ç»ˆç¡®è®¤æ•´åˆç»“æœ
  - å·¥å…·ï¼šå¯ä»¥è°ƒç”¨å…¶ä»–ä¸“å®¶ï¼ˆtaskï¼‰
  - æ¨¡å‹ï¼š`gpt-4o`ï¼ˆéœ€è¦å¼ºåˆ¤æ–­åŠ›ï¼‰

- [x] **4.4 ä¸“å®¶æç¤ºè¯è®¾è®¡**
  - æ¯ä¸ªä¸“å®¶çš„ system_prompt
  - æ˜ç¡®èŒè´£ã€è¾“å‡ºæ ¼å¼ã€çº¦æŸ
  - **é‡ç‚¹**ï¼šquery_planner çš„åæ€æœºåˆ¶

- [ ] **4.5 ä¸“å®¶è®¨è®ºæœºåˆ¶è®¾è®¡**
  - å®ç°ä¸“å®¶ä¹‹é—´çš„è®¨è®ºæµç¨‹
  - ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå…±äº«åˆ†æç»“æœ
  - ä¸“å®¶å¯ä»¥è¯„è®ºå…¶ä»–ä¸“å®¶çš„ç»“æœ

- [x] **4.6 ä¸“å®¶å·¥å…·é…ç½®**
  - query_plannerï¼šæ— ï¼ˆçº¯æ¨ç†ï¼‰
  - fact_checker å’Œ researcherï¼šéœ€è¦ internet_search
  - expert_supervisorï¼šå¯ä»¥è°ƒç”¨å…¶ä»–ä¸“å®¶
  - å…¶ä»–ä¸“å®¶ï¼šä¸éœ€è¦é¢å¤–å·¥å…·

- [x] **4.7 é›†æˆåˆ° MasterAgent**
  - ä¿®æ”¹ï¼š`src/agent/master.py`
  - å°† subagents é…ç½®ä¼ å…¥ create_deep_agent

- [ ] **4.8 æ›´æ–°å·¥ä½œæµç¨‹**
  - æ·»åŠ "ä¸“å®¶è®¨è®º"é˜¶æ®µ
  - æ·»åŠ "ä¸»ç®¡å®¡æ ¸"é˜¶æ®µ
  - æ·»åŠ "ä¿®æ­£è¿­ä»£"æœºåˆ¶

### ä¸“å®¶é…ç½®ç»“æ„

```python
# ç¤ºä¾‹ï¼šæŸ¥è¯¢è§„åˆ’ä¸“å®¶ï¼ˆæ–°å¢ï¼‰
query_planner = {
    "name": "query_planner",
    "description": "åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆå¤šç»´åº¦æœç´¢æŸ¥è¯¢ï¼Œå¹¶åæ€æŸ¥è¯¢è´¨é‡",
    "system_prompt": """ä½ æ˜¯æŸ¥è¯¢è§„åˆ’ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ç”Ÿæˆé«˜è´¨é‡çš„æœç´¢æŸ¥è¯¢ã€‚

å·¥ä½œæµç¨‹ï¼š
1. **æ„å›¾åˆ†æ**ï¼šç†è§£ç”¨æˆ·æƒ³äº†è§£ä»€ä¹ˆï¼ˆé¢†åŸŸã€æ—¶é—´èŒƒå›´ã€å…³æ³¨ç‚¹ï¼‰
2. **æŸ¥è¯¢ç”Ÿæˆ**ï¼šç”Ÿæˆ 3-5 ä¸ªä¸åŒè§’åº¦çš„æœç´¢æŸ¥è¯¢
   - æ ¸å¿ƒæŸ¥è¯¢ï¼šç›´æ¥å¯¹åº”ç”¨æˆ·éœ€æ±‚
   - æ‰©å±•æŸ¥è¯¢ï¼šç›¸å…³è¯é¢˜ã€èƒŒæ™¯ä¿¡æ¯
   - å¯¹æ¯”æŸ¥è¯¢ï¼šä¸åŒè§‚ç‚¹ã€ç«å“å¯¹æ¯”
3. **åæ€æ£€æŸ¥**ï¼š
   - æŸ¥è¯¢æ˜¯å¦å¤ªå®½æ³›ï¼Ÿï¼ˆå¦‚"ç§‘æŠ€"â†’ åº”å…·ä½“åˆ°"AI Agent æœ€æ–°è¿›å±•"ï¼‰
   - æŸ¥è¯¢æ˜¯å¦å¤ªçª„ï¼Ÿï¼ˆå¯èƒ½æœä¸åˆ°ç»“æœï¼‰
   - æ˜¯å¦é—æ¼é‡è¦è§†è§’ï¼Ÿï¼ˆæŠ€æœ¯ã€å¸‚åœºã€ç”¨æˆ·åé¦ˆç­‰ï¼‰
4. **åŠ¨æ€è°ƒæ•´**ï¼šå¦‚æœ MasterAgent åé¦ˆæ£€ç´¢ç»“æœä¸ç†æƒ³ï¼Œåˆ†æåŸå› å¹¶è°ƒæ•´

è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰ï¼š
{
  "queries": [
    {"query": "...", "purpose": "æ ¸å¿ƒæŸ¥è¯¢", "priority": "high"},
    {"query": "...", "purpose": "èƒŒæ™¯ä¿¡æ¯", "priority": "medium"}
  ],
  "reflection": "æŸ¥è¯¢è´¨é‡è‡ªè¯„ï¼š...",
  "suggestions": "å¦‚æœç»“æœä¸è¶³ï¼Œå»ºè®®..."
}

ç¤ºä¾‹ï¼š
ç”¨æˆ·ï¼š"ä»Šå¤© AI é¢†åŸŸæœ‰ä»€ä¹ˆè¿›å±•"
è¾“å‡ºï¼š
{
  "queries": [
    {"query": "AI Agent 2024å¹´12æœˆ æœ€æ–°è¿›å±•", "purpose": "æ ¸å¿ƒæŸ¥è¯¢", "priority": "high"},
    {"query": "OpenAI ChatGPT æ›´æ–° 12æœˆ", "purpose": "å¤§å‚åŠ¨æ€", "priority": "high"},
    {"query": "AI åˆ›ä¸šå…¬å¸ èèµ„ æ–°é—»", "purpose": "è¡Œä¸šåŠ¨æ€", "priority": "medium"},
    {"query": "AI å®‰å…¨ ç›‘ç®¡ æ”¿ç­–", "purpose": "æ”¿ç­–è§†è§’", "priority": "low"}
  ],
  "reflection": "æŸ¥è¯¢è¦†ç›–äº†æŠ€æœ¯è¿›å±•ã€å¤§å‚åŠ¨æ€ã€è¡Œä¸šèèµ„ã€æ”¿ç­–ç›‘ç®¡å››ä¸ªç»´åº¦ï¼Œæ—¶é—´èŒƒå›´èšç„¦è¿‘æœŸ",
  "suggestions": "å¦‚æœæŠ€æœ¯ç±»ç»“æœè¾ƒå°‘ï¼Œå¯è¡¥å……æŸ¥è¯¢'AI å­¦æœ¯è®ºæ–‡ arxiv 12æœˆ'"
}
""",
    "tools": [],  # æ— éœ€å·¥å…·ï¼Œçº¯æ¨ç†
    "model": "openai:gpt-4o",  # éœ€è¦å¼ºæ¨ç†èƒ½åŠ›
}

# ç¤ºä¾‹ï¼šæ‘˜è¦ä¸“å®¶
summarizer = {
    "name": "summarizer",
    "description": "æå–æ–°é—»æ ¸å¿ƒè¦ç‚¹ï¼Œç”Ÿæˆç»“æ„åŒ–æ‘˜è¦",
    "system_prompt": """ä½ æ˜¯æ‘˜è¦ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. æå–æ–‡ç« çš„æ ¸å¿ƒè¦ç‚¹ï¼ˆ3-5ç‚¹ï¼‰
2. è¯†åˆ«å…³é”®æ•°æ®ã€äººç‰©ã€æ—¶é—´
3. è¾“å‡ºç»“æ„åŒ–æ‘˜è¦

è¾“å‡ºæ ¼å¼ï¼š
- æ ¸å¿ƒè¦ç‚¹ï¼š...
- å…³é”®æ•°æ®ï¼š...
- é‡è¦äººç‰©ï¼š...
""",
    "tools": [],  # æ— éœ€é¢å¤–å·¥å…·
    "model": "openai:gpt-4o-mini",  # ç®€å•ä»»åŠ¡ç”¨å°æ¨¡å‹
}

# ç¤ºä¾‹ï¼šäº‹å®æ ¸æŸ¥ä¸“å®¶
fact_checker = {
    "name": "fact_checker",
    "description": "æ ¸æŸ¥å…³é”®äº‹å®å£°æ˜çš„çœŸå®æ€§",
    "system_prompt": """ä½ æ˜¯äº‹å®æ ¸æŸ¥ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. è¯†åˆ«æ–‡ç« ä¸­çš„å…³é”®å£°æ˜
2. ä½¿ç”¨æœç´¢å·¥å…·éªŒè¯äº‹å®
3. æ ‡æ³¨ï¼šå·²éªŒè¯/å¾…éªŒè¯/å­˜ç–‘

è§„åˆ™ï¼š
- ä¸ç¡®å®šæ—¶æ˜ç¡®è¯´æ˜
- æä¾›éªŒè¯æ¥æº
""",
    "tools": [internet_search],  # éœ€è¦æœç´¢èƒ½åŠ›
    "model": "openai:gpt-4o",  # éœ€è¦ä¸¥è°¨ï¼Œç”¨å¤§æ¨¡å‹
}
```

### éªŒæ”¶æ ‡å‡†
```python
from src.agent import create_news_agent

agent = create_news_agent()

# æµ‹è¯• 1ï¼šæŸ¥è¯¢è§„åˆ’ä¸“å®¶
result = agent.invoke({
    "messages": [{
        "role": "user", 
        "content": "ä»Šå¤© AI é¢†åŸŸæœ‰ä»€ä¹ˆé‡è¦è¿›å±•"
    }]
})
# Agent åº”è¯¥å…ˆè°ƒç”¨ task("query_planner", ...) ç”Ÿæˆæœç´¢æŸ¥è¯¢

# æµ‹è¯• 2ï¼šå†…å®¹åˆ†æä¸“å®¶
result = agent.invoke({
    "messages": [{
        "role": "user", 
        "content": "ä½¿ç”¨ summarizer åˆ†æè¿™ç¯‡æ–‡ç« ï¼š[æ–‡ç« å†…å®¹]"
    }]
})
# Agent åº”è¯¥è°ƒç”¨ task("summarizer", ...)

# æµ‹è¯• 3ï¼šåæ€ä¸è°ƒæ•´
# å¦‚æœåˆæ¬¡æ£€ç´¢ç»“æœä¸è¶³ï¼ŒMasterAgent åº”è¯¥ï¼š
# 1. è¯†åˆ«é—®é¢˜ï¼ˆç»“æœå¤ªå°‘ã€ä¸ç›¸å…³ç­‰ï¼‰
# 2. å†æ¬¡è°ƒç”¨ query_planner è°ƒæ•´æŸ¥è¯¢ç­–ç•¥
# 3. æ‰§è¡Œè¡¥å……æœç´¢
```

### ç›®å½•ç»“æ„
```
src/agent/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ master.py          # create_news_agentï¼ˆæ›´æ–°ï¼‰
â”œâ”€â”€ prompts.py         # ä¸»Agentæç¤ºè¯ï¼ˆæ›´æ–°ï¼šå¼ºè°ƒå…ˆè°ƒç”¨ query_plannerï¼‰
â”œâ”€â”€ subagents.py       # ä¸“å®¶å­Agenté…ç½®ï¼ˆæ–°å¢ï¼šåŒ…å« query_plannerï¼‰
â””â”€â”€ model_config.py    # æ¨¡å‹é…ç½®
```

### MasterAgent å·¥ä½œæµç¨‹ï¼ˆæ›´æ–°ï¼‰

```
ç”¨æˆ·è¾“å…¥ï¼š"ä»Šå¤©AIé¢†åŸŸæœ‰ä»€ä¹ˆè¿›å±•"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MasterAgent è§„åˆ’é˜¶æ®µ                                         â”‚
â”‚ 1. write_todos ç”Ÿæˆåˆå§‹è®¡åˆ’                                 â”‚
â”‚    [pending] è°ƒç”¨ query_planner ç”Ÿæˆæœç´¢æŸ¥è¯¢                â”‚
â”‚    [pending] æ‰§è¡Œæœç´¢                                       â”‚
â”‚    [pending] åæ€æ£€ç´¢ç»“æœ                                   â”‚
â”‚    [pending] ç­›é€‰å†…å®¹                                       â”‚
â”‚    [pending] æ·±åº¦åˆ†æ                                       â”‚
â”‚    [pending] ç”ŸæˆæŠ¥å‘Š                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è°ƒç”¨ query_planner å­Agent                                  â”‚
â”‚ task("query_planner", "åˆ†æç”¨æˆ·éœ€æ±‚ï¼šä»Šå¤©AIé¢†åŸŸæœ‰ä»€ä¹ˆè¿›å±•") â”‚
â”‚                                                             â”‚
â”‚ query_planner è¾“å‡ºï¼š                                        â”‚
â”‚ {                                                           â”‚
â”‚   "queries": [                                              â”‚
â”‚     "AI Agent 2024å¹´12æœˆ æœ€æ–°è¿›å±•",                         â”‚
â”‚     "OpenAI ChatGPT æ›´æ–° 12æœˆ",                             â”‚
â”‚     "AI åˆ›ä¸šå…¬å¸ èèµ„"                                      â”‚
â”‚   ],                                                        â”‚
â”‚   "reflection": "è¦†ç›–æŠ€æœ¯ã€äº§å“ã€å•†ä¸šä¸‰ä¸ªç»´åº¦",             â”‚
â”‚   "suggestions": "å¦‚æœç»“æœä¸è¶³ï¼Œå¯è¡¥å……å­¦æœ¯è®ºæ–‡æŸ¥è¯¢"         â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MasterAgent æ‰§è¡Œæœç´¢                                        â”‚
â”‚ - ä½¿ç”¨ query_planner ç”Ÿæˆçš„æŸ¥è¯¢                            â”‚
â”‚ - è°ƒç”¨ internet_search(...) é€ä¸ªæ‰§è¡Œ                       â”‚
â”‚ - ç»“æœå†™å…¥ /raw/search_results.json                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MasterAgent åæ€æ£€ç´¢ç»“æœ                                    â”‚
â”‚ - ç»“æœæ˜¯å¦è¶³å¤Ÿï¼Ÿï¼ˆæ•°é‡ã€è´¨é‡ï¼‰                              â”‚
â”‚ - å¦‚æœä¸è¶³ï¼šå†æ¬¡è°ƒç”¨ query_planner è°ƒæ•´ç­–ç•¥                â”‚
â”‚ - æ‰§è¡Œè¡¥å……æœç´¢                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”‚ ï¼ˆåç»­ï¼šç­›é€‰ã€åˆ†æã€æŠ¥å‘Šç”Ÿæˆ...ï¼‰
```

---

## Phase 5: ç«¯åˆ°ç«¯é›†æˆï¼ˆ3hï¼‰

### ç›®æ ‡
å®Œæˆ CLI å…¥å£ï¼ŒéªŒè¯å®Œæ•´æµç¨‹ã€‚

### ä»»åŠ¡æ¸…å•

- [ ] **5.1 CLI å…¥å£**
  - æ–‡ä»¶ï¼š`cli/main.py`
  - åŠŸèƒ½ï¼š
    - è§£æå‘½ä»¤è¡Œå‚æ•°ï¼ˆquery, domain, outputï¼‰
    - åˆ›å»ºå¹¶è¿è¡Œ Agent
    - è¾“å‡ºæŠ¥å‘Š
  - æµ‹è¯•ï¼š`tests/cli/test_main.py`

- [ ] **5.2 é›†æˆæµ‹è¯•**
  - æ–‡ä»¶ï¼š`tests/integration/test_e2e.py`
  - åœºæ™¯ï¼š
    - å®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆMock LLM å’Œ Tavilyï¼‰
    - åæ€è§¦å‘æµ‹è¯•ï¼ˆç»“æœä¸è¶³æ—¶ï¼‰
    - å¤šä¸“å®¶åä½œæµ‹è¯•

- [ ] **5.3 æ¸…ç†ä¸æ–‡æ¡£**
  - åˆ é™¤æ—§çš„ workflow ä»£ç ï¼ˆ`src/workflow/`ã€`src/nodes/`ï¼‰
  - æ›´æ–° README.md
  - æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

- [ ] **5.4 ç¤ºä¾‹è¿è¡ŒéªŒè¯**
  - ä½¿ç”¨çœŸå® API è¿è¡Œä¸€æ¬¡å®Œæ•´æµç¨‹
  - éªŒè¯æŠ¥å‘Šè´¨é‡

### CLI ä½¿ç”¨æ–¹å¼

```bash
# åŸºç¡€ä½¿ç”¨
python -m cli.main "ä»Šå¤©ç§‘æŠ€åœˆæœ‰ä»€ä¹ˆå¤§äº‹"

# æŒ‡å®šé¢†åŸŸ
python -m cli.main --domain finance "æœ€æ–°è´¢ç»çƒ­ç‚¹"

# è¾“å‡ºåˆ°æ–‡ä»¶
python -m cli.main --output ./reports/today.md "AI é¢†åŸŸè¿›å±•"

# è¯¦ç»†æ—¥å¿—
python -m cli.main --verbose "åˆ†æç‰¹æ–¯æ‹‰åŠ¨æ€"
```

### éªŒæ”¶æ ‡å‡†
```bash
# è¿è¡Œ CLI
python -m cli.main "ä»Šå¤©AIé¢†åŸŸæœ‰ä»€ä¹ˆé‡è¦è¿›å±•"

# é¢„æœŸè¾“å‡ºï¼š
# - Agent è§„åˆ’ todo åˆ—è¡¨
# - æ‰§è¡Œæœç´¢
# - åæ€å¹¶è°ƒæ•´ï¼ˆå¦‚éœ€è¦ï¼‰
# - æ´¾ç”Ÿä¸“å®¶åˆ†æ
# - ç”Ÿæˆ Markdown æŠ¥å‘Š
```

### æœ€ç»ˆç›®å½•ç»“æ„
```
news-report-agent/
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â”œâ”€â”€ TECHNICAL_DESIGN.md
â”œâ”€â”€ IMPLEMENTATION_PLAN.md
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ agent/                 # Agent æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ master.py          # create_news_agent
â”‚   â”‚   â”œâ”€â”€ prompts.py         # ç³»ç»Ÿæç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ subagents.py       # ä¸“å®¶é…ç½®
â”‚   â”‚   â””â”€â”€ model_config.py    # æ¨¡å‹é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                 # è‡ªå®šä¹‰å·¥å…·
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ search.py          # internet_search
â”‚   â”‚   â”œâ”€â”€ scraper.py         # fetch_page
â”‚   â”‚   â””â”€â”€ evaluator.py       # evaluate_credibility
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ logger.py
â”‚       â””â”€â”€ templates.py       # æŠ¥å‘Šæ¨¡æ¿
â”‚
â”œâ”€â”€ cli/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py                # CLI å…¥å£
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_config.py
â”‚   â”œâ”€â”€ test_models.py
â”‚   â”œâ”€â”€ test_deepagents_basic.py
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ test_search.py
â”‚   â”‚   â”œâ”€â”€ test_scraper.py
â”‚   â”‚   â””â”€â”€ test_evaluator.py
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â””â”€â”€ test_master.py
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ test_e2e.py
â”‚
â””â”€â”€ data/                      # è¿è¡Œæ—¶æ•°æ®
```

---

## ğŸ”„ è¿­ä»£ç­–ç•¥

### æ¯ä¸ª Phase çš„å·¥ä½œæµç¨‹

```
1. è®¾è®¡æ¥å£ â”€â”€â–º 2. å†™æµ‹è¯• â”€â”€â–º 3. å®ç°ä»£ç  â”€â”€â–º 4. éªŒè¯é›†æˆ
      â”‚              â”‚              â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         TDD å¾ªç¯
```

### æµ‹è¯•ç­–ç•¥

| ç±»å‹ | è¦†ç›–èŒƒå›´ | Mock ç­–ç•¥ |
|------|---------|----------|
| å·¥å…·å•æµ‹ | æ¯ä¸ªè‡ªå®šä¹‰å·¥å…· | Mock Tavily/httpx |
| Agent å•æµ‹ | Agent åˆ›å»ºå’Œé…ç½® | Mock LLM |
| é›†æˆæµ‹è¯• | å®Œæ•´æµç¨‹ | Mock æ‰€æœ‰å¤–éƒ¨ä¾èµ– |
| å†’çƒŸæµ‹è¯• | çœŸå® API | ä»…æ‰‹åŠ¨è¿è¡Œ |

### ä¾èµ–ç®¡ç†

```toml
# pyproject.toml æ ¸å¿ƒä¾èµ–
dependencies = [
    "deepagents>=0.2.8",
    "langchain>=0.3.0",
    "langchain-openai>=0.3.0",
    "tavily-python>=0.7.13",
    "httpx>=0.27.0",
    "beautifulsoup4>=4.12.0",
    "pydantic>=2.0.0",
    "python-dotenv>=1.0.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=8.0.0",
    "pytest-asyncio>=0.23.0",
    "pytest-mock>=3.12.0",
]
```

---

## â±ï¸ æ—¶é—´çº¿å»ºè®®

| å¤© | å®Œæˆå†…å®¹ |
|----|---------|
| Day 1 | Phase 1ï¼ˆé¡¹ç›®åŸºç¡€ï¼‰+ Phase 2 å‰åŠï¼ˆæœç´¢å·¥å…·ï¼‰ |
| Day 2 | Phase 2 ååŠï¼ˆæŠ“å–ã€è¯„ä¼°ï¼‰+ Phase 3ï¼ˆMasterAgentï¼‰ |
| Day 3 | Phase 4ï¼ˆä¸“å®¶å­Agentï¼‰+ Phase 5ï¼ˆé›†æˆï¼‰ |

---

## ğŸ“Œ å…³é”®æ£€æŸ¥ç‚¹

### Phase 1 å®Œæˆå
- [ ] DeepAgents å¯æ­£å¸¸åˆ›å»º Agent
- [ ] å†…ç½®å·¥å…·ï¼ˆwrite_todos, read_fileï¼‰å¯è°ƒç”¨
- [ ] é…ç½®æ­£ç¡®åŠ è½½

### Phase 2 å®Œæˆå
- [ ] internet_search è¿”å›ç»“æ„åŒ–ç»“æœ
- [ ] fetch_page æ­£ç¡®æå–æ­£æ–‡
- [ ] evaluate_credibility ç»™å‡ºåˆç†è¯„åˆ†

### Phase 3 å®Œæˆå
- [ ] Agent èƒ½æ ¹æ®è¯·æ±‚ç”Ÿæˆ todo
- [ ] Agent èƒ½è°ƒç”¨è‡ªå®šä¹‰å·¥å…·
- [ ] ç³»ç»Ÿæç¤ºè¯ä½“ç°å››å¤§èŒƒå¼

### Phase 4 å®Œæˆå
- [ ] Agent èƒ½æ´¾ç”Ÿå­Agentï¼ˆtaskï¼‰
- [ ] å„ä¸“å®¶èƒ½ç‹¬ç«‹å®Œæˆåˆ†æ
- [ ] ç»“æœæ­£ç¡®å†™å…¥æ–‡ä»¶ç³»ç»Ÿ

### Phase 5 å®Œæˆå
- [ ] CLI å¯æ­£å¸¸è¿è¡Œ
- [ ] å®Œæ•´æµç¨‹å¯è·‘é€š
- [ ] è¾“å‡º Markdown æŠ¥å‘Š

---

## ğŸš€ å¼€å§‹å®æ–½

å‡†å¤‡å¥½åï¼Œä» **Phase 1: é¡¹ç›®åŸºç¡€** å¼€å§‹ï¼š

1. æ›´æ–° `pyproject.toml` æ·»åŠ  deepagents ä¾èµ–
2. åˆ›å»º `src/config.py` é…ç½®ç®¡ç†
3. åˆ›å»º `src/models.py` æ•°æ®æ¨¡å‹
4. ç¼–å†™æµ‹è¯•éªŒè¯ DeepAgents åŸºç¡€åŠŸèƒ½

